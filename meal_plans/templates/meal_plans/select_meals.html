{% extends 'layout.html' %}

{% block content %}
<h2>Select Meals for {{ meal_plan.start_date }} to {{ meal_plan.end_date }}</h2>
<form method="post">
    {% csrf_token %}
    <table class="table">
        <thead>
            <tr>
                <th>Day</th>
                {% for meal_type in meal_types %}
                <th>{{ meal_type.1 }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for day in days %}
            <tr>
                <td>{{ day.date|date:"D, M j" }}</td>
                {% for meal_type in meal_types %}
                <td>
                    <select name="day_{{ day.id }}_meal_{{ meal_type.0 }}" class="form-control">
                        <option value="">--- Select Recipe ---</option>
                        {% for recipe in recipes %}
                            <option value="{{ recipe.id }}"
                            {% if meal_selections.day.id.meal_type.0 == recipe.id %}selected{% endif %}>
                            {{ recipe.title }}
                            </option>
                        {% endfor %}
                    </select>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit" class="btn btn-primary">Save Meal Plan</button>
</form>
{% endblock %}